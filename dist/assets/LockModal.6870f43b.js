import{M as C,a as w,c as y,b as $,v as M,f as u,aD as l,o as F,k as L,B as f,n as s,r,t as _,p as k,C as S,aE as I}from"./index.40f28117.js";import{B as b,b as N}from"./index.a3ead513.js";import{B as R,k as D}from"./useForm.9a5d1858.js";import{u as P}from"./lock.1668c6e8.js";import{h as U}from"./header.d801b988.js";import"./useWindowSizeFn.8d01d8dc.js";import"./FullscreenOutlined.0e9dbd72.js";import"./isEqual.8a89fd1c.js";import"./_baseIsEqual.c5111bd7.js";import"./index.d33df51e.js";import"./index.b825efce.js";import"./responsiveObserve.c900bce4.js";import"./_baseIteratee.0528b8a7.js";import"./get.556588de.js";import"./useSize.d39be33d.js";import"./index.35fd0b48.js";import"./index.b57c249b.js";import"./index.aa289207.js";import"./index.c7801b57.js";import"./warning.18976e6a.js";import"./index.f9006eff.js";import"./index.aaefffe5.js";import"./useSortable.e9ade8ab.js";import"./download.6d4403be.js";import"./index.d77a1ec6.js";import"./index.6cb9064d.js";const V=w({name:"LockModal",components:{BasicModal:b,BasicForm:R},setup(){const{t:e}=y(),{prefixCls:c}=$("header-lock-modal"),a=M(),p=P(),m=u(()=>{var o;return(o=a.getUserInfo)==null?void 0:o.realName}),[d,{closeModal:t}]=N(),[n,{validateFields:i,resetFields:g}]=D({showActionButtonGroup:!1,schemas:[{field:"password",label:e("layout.header.lockScreenPassword"),component:"InputPassword",required:!0}]});async function h(){const B=(await i()).password;t(),p.setLockInfo({isLock:!0,pwd:B}),await g()}const v=u(()=>{const{avatar:o}=a.getUserInfo;return o||U});return{t:e,prefixCls:c,getRealName:m,register:d,registerForm:n,handleLock:h,avatar:v}}}),q=["src"];function z(e,c,a,p,m,d){const t=l("BasicForm"),n=l("a-button"),i=l("BasicModal");return F(),L(i,I({footer:null,title:e.t("layout.header.lockScreen")},e.$attrs,{class:e.prefixCls,onRegister:e.register}),{default:f(()=>[s("div",{class:r(`${e.prefixCls}__entry`)},[s("div",{class:r(`${e.prefixCls}__header`)},[s("img",{src:e.avatar,class:r(`${e.prefixCls}__header-img`)},null,10,q),s("p",{class:r(`${e.prefixCls}__header-name`)},_(e.getRealName),3)],2),k(t,{onRegister:e.registerForm},null,8,["onRegister"]),s("div",{class:r(`${e.prefixCls}__footer`)},[k(n,{type:"primary",block:"",class:"mt-2",onClick:e.handleLock},{default:f(()=>[S(_(e.t("layout.header.lockScreenBtn")),1)]),_:1},8,["onClick"])],2)],2)]),_:1},16,["title","class","onRegister"])}var me=C(V,[["render",z]]);export{me as default};
