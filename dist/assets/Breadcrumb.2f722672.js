import{M as E,a as A,bl as D,aK as N,w as S,bs as T,b as V,bR as z,b5 as L,c as O,ao as q,bu as G,bN as J,bq as K,ez as j,aD as v,o as m,i as I,p as F,B as R,k as $,l as H,t as M,C as Q,r as U,J as W}from"./index.40f28117.js";import{B as P}from"./index.4f5af4cb.js";const X=A({name:"LayoutBreadcrumb",components:{Icon:D,[P.name]:P},props:{theme:N.oneOf(["dark","light"])},setup(){const r=S([]),{currentRoute:u}=T(),{prefixCls:_}=V("layout-breadcrumb"),{getShowBreadCrumbIcon:C}=z(),f=L(),{t:k}=O();q(async()=>{var g,B,y;if(u.value.name===G)return;const n=await J(),e=u.value.matched,t=e==null?void 0:e[e.length-1];let a=u.value.path;t&&((g=t==null?void 0:t.meta)==null?void 0:g.currentActiveMenu)&&(a=t.meta.currentActiveMenu);const s=K(n,a),i=n.filter(w=>w.path===s[0]),o=l(i,s);if(!o||o.length===0)return;const b=p(o);(B=u.value.meta)!=null&&B.currentActiveMenu&&b.push({...u.value,name:((y=u.value.meta)==null?void 0:y.title)||u.value.name}),r.value=b});function l(n,e){const t=[];return n.forEach(a=>{var s,i;e.includes(a.path)&&t.push({...a,name:((s=a.meta)==null?void 0:s.title)||a.name}),(i=a.children)!=null&&i.length&&t.push(...l(a.children,e))}),t}function p(n){return j(n,e=>{const{meta:t,name:a}=e;if(!t)return!!a;const{title:s,hideBreadcrumb:i}=t;return!(!s||i)}).filter(e=>{var t;return!((t=e.meta)!=null&&t.hideBreadcrumb)})}function d(n,e,t){t==null||t.preventDefault();const{children:a,redirect:s,meta:i}=n;if((a==null?void 0:a.length)&&!s){t==null||t.stopPropagation();return}if(!(i!=null&&i.carryParam))if(s&&W(s))f(s);else{let o="";e.length===1?o=e[0]:o=`${e.slice(1).pop()||""}`,o=/^\//.test(o)?o:`/${o}`,f(o)}}function c(n,e){return n.indexOf(e)!==n.length-1}function h(n){var e;return n.icon||((e=n.meta)==null?void 0:e.icon)}return{routes:r,t:k,prefixCls:_,getIcon:h,getShowBreadCrumbIcon:C,handleClick:d,hasRedirect:c}}}),Y={key:1};function Z(r,u,_,C,f,k){const l=v("Icon"),p=v("router-link"),d=v("a-breadcrumb");return m(),I("div",{class:U([r.prefixCls,`${r.prefixCls}--${r.theme}`])},[F(d,{routes:r.routes},{itemRender:R(({route:c,routes:h,paths:n})=>[r.getShowBreadCrumbIcon&&r.getIcon(c)?(m(),$(l,{key:0,icon:r.getIcon(c)},null,8,["icon"])):H("",!0),r.hasRedirect(h,c)?(m(),$(p,{key:2,to:"",onClick:e=>r.handleClick(c,n,e)},{default:R(()=>[Q(M(r.t(c.name||c.meta.title)),1)]),_:2},1032,["onClick"])):(m(),I("span",Y,M(r.t(c.name||c.meta.title)),1))]),_:1},8,["routes"])],2)}var te=E(X,[["render",Z]]);export{te as default};
